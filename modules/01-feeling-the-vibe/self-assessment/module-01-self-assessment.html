<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1: Self-Assessment Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* The main container for the 3D effect */
        .perspective-container {
            perspective: 1000px;
        }
        /* The inner element that flips */
        .quiz-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        /* The flip effect */
        .quiz-card-inner.is-flipped {
            transform: rotateY(180deg);
        }
        /* Common styles for front and back faces */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
        }
        /* Style for the back face, pre-rotated */
        .card-back {
            transform: rotateY(180deg);
        }
        .option-btn:disabled {
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 flex items-center justify-center min-h-screen p-4">

    <div id="quiz-container" class="w-full max-w-2xl mx-auto">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-indigo-600 dark:text-indigo-400">Week 1 Self-Assessment</h1>
            <p class="text-gray-600 dark:text-gray-400 mt-2">Check your understanding of the core concepts.</p>
        </div>

        <!-- Quiz Card -->
        <div id="quiz-card" class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8 perspective-container">
            <div id="card-inner" class="quiz-card-inner" style="min-height: 350px;">
                <!-- Question Side -->
                <div id="question-side" class="card-face">
                    <div class="flex flex-col h-full">
                        <div class="flex justify-between items-start mb-4">
                            <h2 class="text-xl font-semibold text-gray-800 dark:text-white" id="question-text"></h2>
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-full px-3 py-1" id="question-counter"></span>
                        </div>
                        <div id="options-container" class="space-y-3 flex-grow">
                            <!-- Options will be injected here -->
                        </div>
                    </div>
                </div>
                <!-- Result Side (Initially Hidden) -->
                 <div id="result-side" class="card-face card-back flex flex-col items-center justify-center text-center p-6 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <h2 class="text-2xl font-bold" id="result-title">Quiz Complete!</h2>
                    <p class="text-5xl font-bold my-6" id="result-score"></p>
                    <p class="text-gray-600 dark:text-gray-400 mb-8" id="result-message"></p>
                    <button id="restart-btn" class="w-full bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                        Restart Quiz
                    </button>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between mt-6">
            <button id="back-btn" class="bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2 px-6 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed">
                Back
            </button>
            <button id="next-btn" class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition disabled:opacity-50 disabled:cursor-not-allowed">
                Next
            </button>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "What is the primary role of an AI assistant in this unit?",
                options: ["To write all the code for you", "To act as a 'digital collaborator' you guide and critique", "To replace the need for learning Python", "To automatically submit your assignments"],
                correct: 1,
                category: "Course Philosophy"
            },
            {
                question: "According to the unit policies, how must you document significant AI contributions?",
                options: ["By mentioning it in your code comments", "You don't need to document it", "In a 'Developer's Diary' as an 'Evidence Package'", "By sending an email to the tutor"],
                correct: 2,
                category: "Unit Policies"
            },
            {
                question: "Which service will be used for version control to store your code and track its history?",
                options: ["Google Drive", "Dropbox", "Microsoft OneDrive", "GitHub"],
                correct: 3,
                category: "Tools"
            },
            {
                question: "In Python, what symbol is used to start a single-line comment that the program will ignore?",
                options: ["// (Double slash)", "/* (Slash-star)", "# (Hash/Pound sign)", "-- (Double dash)"],
                correct: 2,
                category: "Basic Python"
            },
            {
                question: "What is the main purpose of the 'zero-install' environment for this unit?",
                options: ["To make the course more expensive", "To allow you to focus on learning concepts instead of software setup", "To ensure you can only work on campus computers", "To limit the programming language you can use"],
                correct: 1,
                category: "Course Philosophy"
            }
        ];

        // State variables
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;

        // DOM Elements
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const questionCounter = document.getElementById('question-counter');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const cardInner = document.getElementById('card-inner');
        const resultSide = document.getElementById('result-side');
        const resultScore = document.getElementById('result-score');
        const resultMessage = document.getElementById('result-message');
        const restartBtn = document.getElementById('restart-btn');

        function loadQuestion(index) {
            // If quiz is over, show results
            if (index >= quizData.length) {
                showResults();
                return;
            }

            // Ensure the question side is visible
            cardInner.classList.remove('is-flipped');
            
            const questionData = quizData[index];
            questionText.textContent = questionData.question;
            questionCounter.textContent = `${index + 1} / ${quizData.length}`;
            optionsContainer.innerHTML = '';

            // Create option buttons
            questionData.options.forEach((option, i) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('w-full', 'text-left', 'p-4', 'rounded-lg', 'border', 'transition', 'duration-200', 'option-btn');
                button.classList.add('border-gray-300', 'dark:border-gray-600', 'hover:bg-gray-100', 'dark:hover:bg-gray-700');
                button.onclick = () => selectAnswer(index, i);
                optionsContainer.appendChild(button);
            });

            updateNavigation();
            restoreAnswerState(index);
        }

        function selectAnswer(questionIndex, answerIndex) {
            userAnswers[questionIndex] = answerIndex;
            const isCorrect = answerIndex === quizData[questionIndex].correct;

            // Provide visual feedback
            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach((btn, i) => {
                btn.disabled = true; // Disable all options after selection
                
                // Style the selected answer
                if (i === answerIndex) {
                    if (isCorrect) {
                        btn.classList.add('bg-green-100', 'dark:bg-green-900', 'border-green-500', 'ring-2', 'ring-green-500');
                    } else {
                        btn.classList.add('bg-red-100', 'dark:bg-red-900', 'border-red-500', 'ring-2', 'ring-red-500');
                    }
                }
                
                // Always highlight the correct answer so the user learns
                if (i === quizData[questionIndex].correct) {
                     btn.classList.add('bg-green-100', 'dark:bg-green-900', 'border-green-500');
                }
            });
            
            updateNavigation();
        }
        
        function restoreAnswerState(questionIndex) {
            const selectedAnswer = userAnswers[questionIndex];
            if (selectedAnswer !== null) {
                const buttons = optionsContainer.querySelectorAll('button');
                const isCorrect = selectedAnswer === quizData[questionIndex].correct;
                
                buttons.forEach((btn, i) => {
                    btn.disabled = true;

                    // Style the selected answer
                    if (i === selectedAnswer) {
                        if (isCorrect) {
                            btn.classList.add('bg-green-100', 'dark:bg-green-900', 'border-green-500', 'ring-2', 'ring-green-500');
                        } else {
                            btn.classList.add('bg-red-100', 'dark:bg-red-900', 'border-red-500', 'ring-2', 'ring-red-500');
                        }
                    }
                    
                    // Always highlight the correct answer
                    if (i === quizData[questionIndex].correct) {
                        btn.classList.add('bg-green-100', 'dark:bg-green-900', 'border-green-500');
                    }
                });
            }
        }

        function updateNavigation() {
            backBtn.disabled = currentQuestionIndex === 0;
            // Disable 'Next' if current question hasn't been answered
            nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
        }

        function showResults() {
            score = userAnswers.reduce((acc, answer, index) => {
                return answer === quizData[index].correct ? acc + 1 : acc;
            }, 0);

            resultScore.textContent = `${score} / ${quizData.length}`;
            let message = "Great job! You've got a solid grasp of the key concepts.";
            if (score < quizData.length) {
                message = "Good start! Review the pre-lab materials to solidify your understanding.";
            }
            if (score <= quizData.length / 2) {
                message = "A good first attempt. It's highly recommended to review the pre-lab materials before the first lab.";
            }
            resultMessage.textContent = message;
            
            cardInner.classList.add('is-flipped');
            nextBtn.style.display = 'none';
            backBtn.style.display = 'none';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            score = 0;
            nextBtn.style.display = 'block';
            backBtn.style.display = 'block';
            loadQuestion(currentQuestionIndex);
        }

        // Event Listeners
        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            }
        });

        backBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        });
        
        restartBtn.addEventListener('click', restartQuiz);

        // Initial Load
        loadQuestion(currentQuestionIndex);
    </script>
</body>
</html>

