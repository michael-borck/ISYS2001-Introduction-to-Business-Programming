---
title: "Breaking Down a Simple Calculator"
subtitle: "Decomposing a Programme into Manageable Parts"
format: jupyter-notebook
jupyter: python3
---

# Introduction

In this worksheet, we'll learn how to decompose a simple calculator programme into smaller, manageable parts. Instead of facing one long "wall of code," we'll break it into clear, individual steps. This approach helps your mind focus on one task at a time, making the overall problem much easier to understand.

**Guided Walkthrough:**  
This worksheet is a guided walkthrough designed to show you exactly how to break down a problem into smaller parts and implement each part as a function. Think of it as a warm-up exercise—later worksheets will let you apply these ideas independently in new contexts, such as a weather-themed temperature conversion and using third-party modules.

# The Original "Wall of Code"

Below is a basic calculator programme that does everything in one go. It displays a menu, gets input from the user, performs a calculation, and then shows the result. You can run the code if you like to see that it works.

```{python}
# Define the calculator functions
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    return a / b

# Display the menu
print("Simple Calculator Menu")
print("1. Add")
print("2. Subtract")
print("3. Multiply")
print("4. Divide")

# Get the user's choice
choice = input("Enter your choice (1-4): ")

# Get the two numbers from the user
num1 = float(input("Enter the first number: "))
num2 = float(input("Enter the second number: "))

# Perform the chosen operation
if choice == "1":
    result = add(num1, num2)
elif choice == "2":
    result = subtract(num1, num2)
elif choice == "3":
    result = multiply(num1, num2)
elif choice == "4":
    result = divide(num1, num2)
else:
    result = "Invalid choice."

# Display the result
print("Result:", result)
```

# Problem Decomposition

Even though the code above works, it can be hard to understand because it does many things at once. Let's break it down into these simple steps:

1. **Display the Menu:** Show the calculator options.
2. **Get the User's Choice:** Ask which operation to perform.
3. **Get the Numbers:** Ask the user for two numbers.
4. **Perform the Calculation:** Use the chosen operation to compute a result.
5. **Display the Result:** Show the computed result to the user.

By splitting the problem into these steps, we make it easier to focus on each part individually.

# Step-by-Step: Creating a Modular Design

Now, we'll implement each step as its own function. This modular design makes the code easier to understand and maintain. We will start by creating functions for displaying the menu, obtaining numbers from the user, and performing the calculation.

## Step 1: Create a Function to Display the Menu

First, let’s create a function that displays the calculator menu and gets the user's choice.

**Pseudo-code:**

```
function get_operation():
    Display "Simple Calculator Menu"
    Display "1. Add"
    Display "2. Subtract"
    Display "3. Multiply"
    Display "4. Divide"
    Prompt user for choice
    Return the user's choice
```

**Code:**

```python
def get_operation():
    print("Simple Calculator Menu")
    print("1. Add")
    print("2. Subtract")
    print("3. Multiply")
    print("4. Divide")
    choice = input("Enter your choice (1-4): ")
    return choice
```

## Step 2: Create a Function to Get a Number

**Pseudo-code:**

```
function get_number(prompt):
    Ask the user for a number using the provided prompt
    Convert the input to a float
    Return the number
```

**Code:**

```python
def get_number(prompt):
    return float(input(prompt))
```

## Step 3: Create a Function to Perform the Calculation

**Pseudo-code:**

```
function perform_calculation(operation, num1, num2):
    if operation is "1":
        return add(num1, num2)
    else if operation is "2":
        return subtract(num1, num2)
    else if operation is "3":
        return multiply(num1, num2)
    else if operation is "4":
        return divide(num1, num2)
    else:
        return "Invalid choice."
```

**Code:**

```python
def perform_calculation(operation, num1, num2):
    if operation == "1":
        return add(num1, num2)
    elif operation == "2":
        return subtract(num1, num2)
    elif operation == "3":
        return multiply(num1, num2)
    elif operation == "4":
        return divide(num1, num2)
    else:
        return "Invalid choice."
```

## Step 4: Improve the Divide Function with Simple Error Checking

We haven’t discussed error handling in depth yet, but we can add a simple check to the `divide()` function to prevent division by zero. This is a common error that can crash a programme. We will discuss error handling more thoroughly later in the semester; for now, we’ll add this basic check.

**Pseudo-code:**

```
function divide(a, b):
    if b equals 0:
        return "Error: Cannot divide by zero."
    else:
        return a divided by b
```

**Code:**

```python
def divide(a, b):
    if b == 0:
        return "Error: Cannot divide by zero."
    else:
        return a / b
```

# The Final Modular Code

Now, we’ll put all these functions together in our main script. Notice how each step is clear and simple. Note that our functions generally don’t print results, our menu function displays prompts, but not the user's choice; they just return values. This is good practice as it makes the functions more flexible and reusable. Run the code below to verify that it works.

```{python}
# Define the calculator functions
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        return "Error: Cannot divide by zero."
    else:
        return a / b

# Function to display the menu and get the user's choice
def get_operation():
    print("Simple Calculator Menu")
    print("1. Add")
    print("2. Subtract")
    print("3. Multiply")
    print("4. Divide")
    choice = input("Enter your choice (1-4): ")
    return choice

# Function to get a floating-point number from the user
def get_number(prompt):
    return float(input(prompt))

# Function to perform the calculation based on the operation
def perform_calculation(operation, num1, num2):
    if operation == "1":
        return add(num1, num2)
    elif operation == "2":
        return subtract(num1, num2)
    elif operation == "3":
        return multiply(num1, num2)
    elif operation == "4":
        return divide(num1, num2)
    else:
        return "Invalid choice."

# Main script
operation = get_operation()
num1 = get_number("Enter the first number: ")
num2 = get_number("Enter the second number: ")
result = perform_calculation(operation, num1, num2)
print("Result:", result)
```

> **Advanced Concept:**  The above process is known as refactoring. It is the process of restructuring existing computer code—changing its internal organisation—without changing its external behaviour. Refactoring improves non-functional attributes of software, including code readability and reduced complexity. This can improve maintainability and make it easier to extend your programme in the future. Although this terminology may seem advanced now, it will become useful as you progress and work with more complex code and AI responses.

# Reflection and Exercises

1. **Understanding the Breakdown:**  
   How does separating the code into individual functions (each handling a specific task) make the programme easier to understand?

2. **Benefits of Modular Design:**  
   Consider how breaking the programme into clear steps:
   - Makes it easier to debug.
   - Allows you to focus on one small part of the problem at a time.
   - Helps in adding new features in the future.

3. **(Optional) Extend the Calculator:**  
   - Try adding a new operation, such as modulus (to get the remainder). Consider:
     - Creating a new function: `def modulus(a, b): return a % b`
     - Updating the menu and the decision structure in `perform_calculation()`.
   - Attempt to add error checking for non-numeric inputs, so if the user enters a letter instead of a digit, the programme displays an error message and asks for a valid number.

4. **Discussion:**  
   Write a short reflection on how breaking down a problem into smaller parts can help you manage larger projects.

Take your time to work through each part of this guided walkthrough. This approach is designed to warm you up for more independent exercises in the upcoming worksheets.

Happy coding!